app.controller("WorkoutCtrl",["$rootScope","$scope","$routeParams","$firebase","Group","Exercise","Workout","FBURL","$timeout","$location",function(e,t,n,r,i,s,o,u,a,f){e.userID||f.path("/");e.loading=0;var l=new Date;i.setRefs();s.setRefs();o.setRefs();i.find(n.groupId).$bind(t,"group");t.today=l.getMonth()+1+"/"+l.getDate()+"/"+l.getFullYear();t.allExercises=s.all(n.groupId);t.success=function(e){o.setLastRecorded(e,t.today);o.getWeight(e).once("value",function(t){weight=t.val();a(function(){o.setWeight(e,weight+5)},500);o.setFailures(e,0)})};var c=function(e,t,n,r){if(n>r)o.setMaxWeight(e,n);else{if(n<r){o.setMaxWeight(e,n);o.setFailures(e,0);return}if(n===r&&t===2){o.setWeight(e,n-5);o.setMaxWeight(e,n-5);o.setFailures(e,0);return}}o.setFailures(e,t)};t.failed=function(e){var n,r,i;o.setLastRecorded(e,t.today);o.getFailures(e).once("value",function(e){n=e.val()+1});o.getWeight(e).once("value",function(e){r=e.val()});o.getMaxWeight(e).once("value",function(e){i=e.val()});a(function(){c(e,n,r,i)},500)}}]);
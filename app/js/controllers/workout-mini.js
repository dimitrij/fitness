app.controller("WorkoutCtrl",["$rootScope","$scope","$routeParams","angularFire","Groups","Exercises","Workout","FBURL","$timeout",function(e,t,n,r,i,s,o,u,a){(function(){r(i.find(n.groupId),t,"group")})();var f=new Date;t.today=f.getMonth()+1+"/"+f.getDate()+"/"+f.getFullYear();console.log(t.date);e.allExercises=s.collect(n.groupId);t.success=function(e){o.setLastRecorded(e,t.today);o.getWeight(e).once("value",function(e){weight=e.val()});a(function(){o.setWeight(e,weight+5);o.setFailures(e,0)},2001)};var l=function(e,t,n,r){if(n>r)o.setMaxWeight(e,n);else{if(n<r){o.setMaxWeight(e,n);o.setFailures(e,0);return}if(n===r&&t===2){o.setWeight(e,n-5);o.setMaxWeight(e,n-5);o.setFailures(e,0);return}}o.setFailures(e,t)};t.failed=function(e){var t,n,r;o.getFailures(e).once("value",function(e){t=e.val()+1});o.getWeight(e).once("value",function(e){n=e.val()});o.getMaxWeight(e).once("value",function(e){r=e.val()});l(e,t,n,r)}}]);
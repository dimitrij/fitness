app.controller("AuthCtrl",["$rootScope","$scope","$location","$routeParams","$timeout","Auth","User",function(e,t,n,r,i,s,o){e.userID&&e.slideView("view-slide-left","/groups");t.user={email:"",oldPassword:"",password:""};e.loading=0;t.login=function(){e.loading=1;s.login(t.user).then(function(t){e.userID=t.uid;e.slideView("view-slide-left","/groups")},function(n){t.passReset=0;e.loading=0;switch(n.code){case"INVALID_EMAIL":t.message="Oops! Double-check that email address.";break;case"INVALID_USER":t.message="Oops! We can't find that email in our system.";break;case"INVALID_PASSWORD":t.passReset=1;break;default:t.message=n.toString()}})};t.loginAnon=function(){e.loading=1;s.loginAnon().then(function(t){e.userID=t.uid;e.slideView("view-slide-left","/groups")},function(n){e.loading=0;t.message=n.toString()})};t.register=function(){s.register(t.user).then(function(t){o.create(t);e.userID=t.uid;e.slideView("view-slide-left","/groups")},function(e){t.message=e.toString()})};t.resetPassword=function(){e.loading=1;s.resetPassword(t.user.email).then(function(n){e.loading=0;t.passReset=0;t.message="Reset instructions emailed successfully."},function(n){e.loading=0;t.passReset=0;t.message="Oops! Try re-entering your credentials."})};t.update=function(){e.loading=1;if(t.user.password===t.passConfirm){t.user.oldPassword=r.temp;t.changePassword()}else{e.loading=0;t.message="Passwords don't match"}};t.changePassword=function(){s.changePassword(t.user).then(function(n){e.loading=0;t.message="Password updated successfully!";t.login()},function(n){e.loading=0;t.message="Oops! Try clicking the link in your email again."})}}]);